<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="/Scripts/jquery.signalR-2.4.2.js"></script>
<script src="/signalr/hubs"></script>
<style>
    .chessboard {
        width: 850px;
        height: 850px;
        background-image: url('/Images/bancotuong.jpg');
    }

    .chessnode {
        position: relative;
        width: 50px;
        height: 50px;
    }

    .chessimgnode {
        width: 50px;
        height: 50px;
        position: relative;
    }
</style>


<div class="container">
    <div id="app">
        <div class="chessboard">
            <div v-for="item in chessNode" v-if="item !== null">
                <div :id="item.id" class="chessnode">
                    <img :src="'/' + item.src" class="chessimgnode" v-bind:style="{ display: item.visible, top: item.top + 'px', left: item.left + 'px'}" />
                </div>
            </div>
        </div>
        {{ message }}
        total record: {{total}}
        <input v-on:click="getTotal" type="button" value="get total" />
        List Student
        <ul id="demo">
            <li v-for="item in students" v-if="item !== null">
                {{item.Id}} {{item.Name}}
            </li>
        </ul>

        class room
        name: <input v-model="classRoom" type="text" value="" />
        class room name: {{classRoom}}

        <input v-on:click="insertClassRoom" type="button" value="insert Class Room" />

        <div>
            <ul id="discussion"></ul>
        </div>
    </div>
</div>
<script>
    var stObject = {};
    const xeDo1 = [105, 410], xeDen1 = [905, 405];
    const maDo1 = [155, 405], maDen1 = [955, 405];
    const tuongDo1 = [205, 405], tuongDen1 = [1005, 405];
    const siDo1 = [255, 405], siDen1 = [1055, 405];
    const tuongDo = [305, 405], tuongDen = [1105, 405];
    const siDo2 = [355, 405], siDen2 = [1155, 405];
    const tuongDo2 = [405, 405], tuongDen2 = [1205, 405];
    const maDo2 = [455, 405], maDen2 = [1255, 405];
    const xeDo2 = [505, 405], xeDen2 = [1305, 405];
    const phaoDo1 = [555, 405], phaoDen1 = [1360, 405];
    const phaoDo2 = [605, 405], phaoDen2 = [1405, 405];
    const totDo1 = [655, 405], totDen1 = [1455, 405];
    const totDo2 = [700, 405], totDen2 = [1505, 405];
    const totDo3 = [755, 405], totDen3 = [1555, 405];
    const totDo4 = [800, 405], totDen4 = [1605, 405];
    const totDo5 = [850, 405], totDen5 = [1655, 405];

    let BanCo =
        [
            ['xeden1', 'maden1', 'tuongden1', 'siden1', 'tuongden', 'siden2', 'tuongden2', 'maden2', 'xeden2'],
            ["", "", "", "", "", "", "", "", ""],
            ["", 'phaoden1', "", "", "", "", "", 'phaoden2', ""],
            ['totden1', "", 'totden2', "", 'totden3', "", 'totden4', "", 'totden5'],
            ["", "", "", "", "", "", "", "", ""],
            ["", "", "", "", "", "", "", "", ""],
            ['totdo1', "", 'totdo2', "", 'totdo3', "", 'totdo4', "", 'totdo5'],
            ["", 'phaodo1', "", "", "", "", "", 'phaodo2', ""],
            ["", "", "", "", "", "", "", "", ""],
            ['xedo1', 'mado1', 'tuongdo1', 'sido1', 'tuongdo', 'sido2', 'tuongdo2', 'mado2', 'xedo2']
        ];

    function LamTron(a, b) {
        let temp = Math.abs(a);
        let temp2 = Math.abs(b);
        while (temp >= temp2) {
            temp -= temp2;
        }
        return Math.abs(a) - temp;
    }

    var app = new Vue({
        el: '#app',
        data: {
            message: 'Hello Vue!',
            total: 0,
            students: [],
            classRoom: '',
            chessNode: [],
            pos: {},
            oldPos: {},
            CoTheDi: []
        },
        methods: {
            getTotal() {
                axios
                    .get('/api/Student/getbyId?Id=1')
                    .then(response => {
                        this.total = response.data.total;
                        this.students = response.data.data;
                        console.log(this.students);
                    })
                    .catch(error => {
                        console.log(error)
                    })
                    .finally()
            },
            insertClassRoom() {
                var payload = { Name: this.classRoom };
                var res = axios.post('/api/ClassRoom/insertClassRoom', payload);
                console.log(res.data);
            },
            getchessNode() {
                var res = axios.post('/api/chess/getchessnode').then(response => {
                    this.chessNode = response.data.chessnode;
                    //this.chessRoom = response.data.data;
                    console.log(response.data.chessnode);
                })
                    .catch(error => {
                        console.log(error)
                    })
                    .finally();
            }
        },
        updated: function () {
            $(".chessnode").draggable({
                start: function (event, ui) {
                    this.pos = ui.helper.position();
                    this.oldPos = ui.position;
                    this.CoTheDi = [];

                    switch (ui.helper.attr('id')) {
                        case 'xedo1': {
                            let docCu = Math.round(this.oldPos.top / 75) + 9;
                            let ngangCu = Math.round(this.oldPos.left / 71) + 0;

                            let temp = 0;
                            // Trên
                            temp = docCu;
                            if (temp - 1 >= 0) {
                                for (let i = temp - 1; i >= 0; --i) {
                                    this.CoTheDi.push([i, ngangCu]);
                                    if (BanCo[i][ngangCu] !== "") {
                                        break;
                                    }
                                }
                            }
                            // Dưới
                            temp = docCu;
                            if (temp + 1 <= 9) {
                                for (let i = temp + 1; i <= 9; ++i) {
                                    this.CoTheDi.push([i, ngangCu]);
                                    if (BanCo[i][ngangCu] !== "") {
                                        break;
                                    }
                                }
                            }
                            // Phải
                            temp = ngangCu;
                            if (temp + 1 <= 9) {
                                for (let i = temp + 1; i <= 9; ++i) {
                                    this.CoTheDi.push([docCu, i]);
                                    if (BanCo[docCu][i] !== "") {
                                        break;
                                    }
                                }
                            }
                            // Trái
                            temp = ngangCu;
                            if (temp - 1 >= 0) {
                                for (let i = temp - 1; i >= 0; --i) {
                                    this.CoTheDi.push([docCu, i]);
                                    if (BanCo[docCu][i] !== "") {
                                        break;
                                    }
                                }
                            }
                            break;
                        }
                        case 'xedo2': {
                            let docCu = Math.round(this.oldPos.top / 75) + 9;
                            let ngangCu = Math.round(this.oldPos.left / 71) + 8;

                            let temp = 0;
                            // Trên
                            temp = docCu;
                            if (temp - 1 >= 0) {
                                for (let i = temp - 1; i >= 0; --i) {
                                    this.CoTheDi.push([i, ngangCu]);
                                    if (BanCo[i][ngangCu] !== "") {
                                        break;
                                    }
                                }
                            }
                            // Dưới
                            temp = docCu;
                            if (temp + 1 <= 9) {
                                for (let i = temp + 1; i <= 9; ++i) {
                                    this.CoTheDi.push([i, ngangCu]);
                                    if (BanCo[i][ngangCu] !== "") {
                                        break;
                                    }
                                }
                            }
                            // Phải
                            temp = ngangCu;
                            if (temp + 1 <= 9) {
                                for (let i = temp + 1; i <= 9; ++i) {
                                    this.CoTheDi.push([docCu, i]);
                                    if (BanCo[docCu][i] !== "") {
                                        break;
                                    }
                                }
                            }
                            // Trái
                            temp = ngangCu;
                            if (temp - 1 >= 0) {
                                for (let i = temp - 1; i >= 0; --i) {
                                    this.CoTheDi.push([docCu, i]);
                                    if (BanCo[docCu][i] !== "") {
                                        break;
                                    }
                                }
                            }
                            break;
                        }
                        case 'phaodo1': {
                            let docCu = Math.round(this.oldPos.top / 75) + 7;
                            let ngangCu = Math.round(this.oldPos.left / 71) + 1;

                            let temp = 0;

                            // Trên
                            temp = docCu;
                            for (let i = temp - 1; i >= 0; --i) {
                                if (BanCo[i][ngangCu] === "") {
                                    this.CoTheDi.push([i, ngangCu]);
                                }
                                else {
                                    break;
                                }
                            }

                            // Dưới
                            temp = docCu;
                            for (let i = temp + 1; i <= 9; ++i) {
                                if (BanCo[i][ngangCu] === "") {
                                    this.CoTheDi.push([i, ngangCu]);
                                }
                                else {
                                    break;
                                }
                            }

                            // Trái
                            temp = ngangCu;
                            for (let i = temp - 1; i >= 0; --i) {
                                if (BanCo[docCu][i] === "") {
                                    this.CoTheDi.push([docCu, i]);
                                }
                                else {
                                    break;
                                }
                            }

                            // Phải
                            temp = ngangCu;
                            for (let i = temp + 1; i <= 9; ++i) {
                                if (BanCo[docCu][i] === "") {
                                    this.CoTheDi.push([docCu, i]);
                                }
                                else {
                                    break;
                                }
                            }

                            // Pháo ăn trên
                            temp = docCu;
                            let demTren = 0;
                            for (let i = temp - 1; i >= 0; --i) {
                                if (String(BanCo[i][ngangCu]) !== "") {
                                    demTren++;
                                }
                                if (demTren == 2) {
                                    if (String(BanCo[i][ngangCu]).includes("den")) {
                                        this.CoTheDi.push([i, ngangCu]);
                                        break;
                                    }
                                }
                            }

                            // Pháo ăn dưới
                            temp = docCu;
                            let demDuoi = 0;
                            for (let i = temp + 1; i <= 9; ++i) {
                                if (String(BanCo[i][ngangCu]) !== "") {
                                    demDuoi++;
                                }
                                if (demDuoi == 2) {
                                    if (String(BanCo[i][ngangCu]).includes("den")) {
                                        this.CoTheDi.push([i, ngangCu]);
                                        break;
                                    }
                                }
                            }

                            // Pháo ăn trái
                            temp = ngangCu;
                            let demTrai = 0;
                            for (let i = temp - 1; i >= 0; --i) {
                                if (String(BanCo[docCu][i]) !== "") {
                                    demTrai++;
                                }
                                if (demTrai == 2) {
                                    if (String(BanCo[docCu][i]).includes("den")) {
                                        this.CoTheDi.push([docCu, i]);
                                        break;
                                    }
                                }
                            }

                            // Pháo ăn phải
                            temp = ngangCu;
                            let demPhai = 0;
                            for (let i = temp + 1; i <= 9; ++i) {
                                if (String(BanCo[docCu][i]) !== "") {
                                    demPhai++;
                                }
                                if (demPhai == 2) {
                                    if (String(BanCo[docCu][i]).includes("den")) {
                                        this.CoTheDi.push([docCu, i]);
                                        break;
                                    }
                                }
                            }
                            break;
                        }
                        case 'phaodo2': {
                            let docCu = Math.round(this.oldPos.top / 75) + 7;
                            let ngangCu = Math.round(this.oldPos.left / 71) + 7;

                            let temp = 0;

                            // Trên
                            temp = docCu;
                            for (let i = temp - 1; i >= 0; --i) {
                                if (BanCo[i][ngangCu] === "") {
                                    this.CoTheDi.push([i, ngangCu]);
                                }
                                else {
                                    break;
                                }
                            }

                            // Dưới
                            temp = docCu;
                            for (let i = temp + 1; i <= 9; ++i) {
                                if (BanCo[i][ngangCu] === "") {
                                    this.CoTheDi.push([i, ngangCu]);
                                }
                                else {
                                    break;
                                }
                            }

                            // Trái
                            temp = ngangCu;
                            for (let i = temp - 1; i >= 0; --i) {
                                if (BanCo[docCu][i] === "") {
                                    this.CoTheDi.push([docCu, i]);
                                }
                                else {
                                    break;
                                }
                            }

                            // Phải
                            temp = ngangCu;
                            for (let i = temp + 1; i <= 9; ++i) {
                                if (BanCo[docCu][i] === "") {
                                    this.CoTheDi.push([docCu, i]);
                                }
                                else {
                                    break;
                                }
                            }

                            // Pháo ăn trên
                            temp = docCu;
                            let demTren = 0;
                            for (let i = temp - 1; i >= 0; --i) {
                                if (String(BanCo[i][ngangCu]) !== "") {
                                    demTren++;
                                }
                                if (demTren == 2) {
                                    if (String(BanCo[i][ngangCu]).includes("den")) {
                                        this.CoTheDi.push([i, ngangCu]);
                                        break;
                                    }
                                }
                            }

                            // Pháo ăn dưới
                            temp = docCu;
                            let demDuoi = 0;
                            for (let i = temp + 1; i <= 9; ++i) {
                                if (String(BanCo[i][ngangCu]) !== "") {
                                    demDuoi++;
                                }
                                if (demDuoi == 2) {
                                    if (String(BanCo[i][ngangCu]).includes("den")) {
                                        this.CoTheDi.push([i, ngangCu]);
                                        break;
                                    }
                                }
                            }

                            // Pháo ăn trái
                            temp = ngangCu;
                            let demTrai = 0;
                            for (let i = temp - 1; i >= 0; --i) {
                                if (String(BanCo[docCu][i]) !== "") {
                                    demTrai++;
                                }
                                if (demTrai == 2) {
                                    if (String(BanCo[docCu][i]).includes("den")) {
                                        this.CoTheDi.push([docCu, i]);
                                        break;
                                    }
                                }
                            }

                            // Pháo ăn phải
                            temp = ngangCu;
                            let demPhai = 0;
                            for (let i = temp + 1; i <= 9; ++i) {
                                if (String(BanCo[docCu][i]) !== "") {
                                    demPhai++;
                                }
                                if (demPhai == 2) {
                                    if (String(BanCo[docCu][i]).includes("den")) {
                                        this.CoTheDi.push([docCu, i]);
                                        break;
                                    }
                                }
                            }
                            break;
                        }
                        case 'tuongdo': {
                            let docCu = Math.round(this.oldPos.top / 75) + 9;
                            let ngangCu = Math.round(this.oldPos.left / 71) + 4;

                            // Xuống
                            if (docCu + 1 <= 9) {
                                if (String(BanCo[docCu + 1][ngangCu]) !== "") {
                                    if (String(BanCo[docCu + 1][ngangCu]).includes("den")) {
                                        this.CoTheDi.push([docCu + 1, ngangCu]);
                                    }
                                }
                                else {
                                    this.CoTheDi.push([docCu + 1, ngangCu]);
                                }
                            }
                            // Lên
                            if (docCu - 1 >= 7) {
                                if (String(BanCo[docCu - 1][ngangCu]) !== "") {
                                    if (String(BanCo[docCu - 1][ngangCu]).includes("den")) {
                                        this.CoTheDi.push([docCu - 1, ngangCu]);
                                    }
                                }
                                else {
                                    this.CoTheDi.push([docCu - 1, ngangCu]);
                                }
                            }
                            // Trái
                            if (ngangCu + 1 <= 5) {
                                if (String(BanCo[docCu][ngangCu + 1]) !== "") {
                                    if (String(BanCo[docCu][ngangCu + 1]).includes("den")) {
                                        this.CoTheDi.push([docCu, ngangCu + 1]);
                                    }
                                }
                                else {
                                    this.CoTheDi.push([docCu, ngangCu + 1]);
                                }
                            }
                            // Phải
                            if (ngangCu - 1 >= 3) {
                                if (String(BanCo[docCu][ngangCu - 1]) !== "") {
                                    if (String(BanCo[docCu][ngangCu - 1]).includes("den")) {
                                        this.CoTheDi.push([docCu, ngangCu - 1]);
                                    }
                                }
                                else {
                                    this.CoTheDi.push([docCu, ngangCu - 1]);
                                }
                            }
                            // Kiểm tra lộ mặt tướng
                            let viTriTuongDen = 0;
                            for (let i = 3; i < 6; ++i) {
                                if (String(BanCo[0][3]) === "tuongden"
                                    || String(BanCo[1][3]) === "tuongden"
                                    || String(BanCo[2][3]) === "tuongden") {
                                    viTriTuongDen = i;
                                    break;
                                }
                            }
                            let isExist = false;
                            if (viTriTuongDen === ngangCu) {
                                for (let i = viTriTuongDen + 1; i < ngangCu; ++i) {
                                    if (String(BanCo[i][ngangCu]) !== "") {
                                        isExist = true;
                                    }
                                }
                            }
                            if (!isExist) {
                                this.CoTheDi.push([ngangCu][viTriTuongDen]);
                            }
                        }
                        case 'sido1': {
                            let docCu = Math.round(this.oldPos.top / 75) + 9;
                            let ngangCu = Math.round(this.oldPos.left / 71) + 3;

                            // Chéo Trên - Trái
                            if ((docCu === 8 && ngangCu == 4) || (docCu === 9 && ngangCu === 5)) {
                                if (String(BanCo[docCu - 1][ngangCu - 1]) !== "") {
                                    if (String(BanCo[docCu - 1][ngangCu - 1]).includes("den")) {
                                        this.CoTheDi.push([docCu - 1, ngangCu - 1]);
                                    }
                                }
                                else {
                                    this.CoTheDi.push([docCu - 1, ngangCu - 1]);
                                }
                            }

                            // Chéo Trên - Phải
                            if ((docCu === 9 && ngangCu === 3) || (docCu === 8 && ngangCu === 4)) {
                                if (String(BanCo[docCu - 1][ngangCu + 1]) !== "") {
                                    if (String(BanCo[docCu - 1][ngangCu + 1]).includes("den")) {
                                        this.CoTheDi.push([docCu - 1, ngangCu + 1]);
                                    }
                                }
                                else {
                                    this.CoTheDi.push([docCu - 1, ngangCu + 1]);
                                }
                            }

                            // Chéo Dưới - Trái
                            if ((docCu === 7 && ngangCu === 5) || (docCu === 8 && ngangCu === 4)) {
                                if (String(BanCo[docCu + 1][ngangCu - 1]) !== "") {
                                    if (String(BanCo[docCu + 1][ngangCu - 1]).includes("den")) {
                                        this.CoTheDi.push([docCu + 1, ngangCu - 1]);
                                    }
                                }
                                else {
                                    this.CoTheDi.push([docCu + 1, ngangCu - 1]);
                                }
                            }

                            // Chéo Dưới - Phải
                            if ((docCu === 7 && ngangCu === 3) || (docCu === 8 && ngangCu === 4)) {
                                if (String(BanCo[docCu + 1][ngangCu + 1]) !== "") {
                                    if (String(BanCo[docCu + 1][ngangCu + 1]).includes("den")) {
                                        this.CoTheDi.push([docCu + 1, ngangCu + 1]);
                                    }
                                }
                                else {
                                    this.CoTheDi.push([docCu + 1, ngangCu + 1]);
                                }
                            }
                            break;
                        }
                        case 'sido2': {
                            let docCu = Math.round(this.oldPos.top / 75) + 9;
                            let ngangCu = Math.round(this.oldPos.left / 71) + 5;

                            // Chéo Trên - Trái
                            if ((docCu === 8 && ngangCu == 4) || (docCu === 9 && ngangCu === 5)) {
                                if (String(BanCo[docCu - 1][ngangCu - 1]) !== "") {
                                    if (String(BanCo[docCu - 1][ngangCu - 1]).includes("den")) {
                                        this.CoTheDi.push([docCu - 1, ngangCu - 1]);
                                    }
                                }
                                else {
                                    this.CoTheDi.push([docCu - 1, ngangCu - 1]);
                                }
                            }

                            // Chéo Trên - Phải
                            if ((docCu === 9 && ngangCu === 3) || (docCu === 8 && ngangCu === 4)) {
                                if (String(BanCo[docCu - 1][ngangCu + 1]) !== "") {
                                    if (String(BanCo[docCu - 1][ngangCu + 1]).includes("den")) {
                                        this.CoTheDi.push([docCu - 1, ngangCu + 1]);
                                    }
                                }
                                else {
                                    this.CoTheDi.push([docCu - 1, ngangCu + 1]);
                                }
                            }

                            // Chéo Dưới - Trái
                            if ((docCu === 7 && ngangCu === 5) || (docCu === 8 && ngangCu === 4)) {
                                if (String(BanCo[docCu + 1][ngangCu - 1]) !== "") {
                                    if (String(BanCo[docCu + 1][ngangCu - 1]).includes("den")) {
                                        this.CoTheDi.push([docCu + 1, ngangCu - 1]);
                                    }
                                }
                                else {
                                    this.CoTheDi.push([docCu + 1, ngangCu - 1]);
                                }
                            }

                            // Chéo Dưới - Phải
                            if ((docCu === 7 && ngangCu === 3) || (docCu === 8 && ngangCu === 4)) {
                                if (String(BanCo[docCu + 1][ngangCu + 1]) !== "") {
                                    if (String(BanCo[docCu + 1][ngangCu + 1]).includes("den")) {
                                        this.CoTheDi.push([docCu + 1, ngangCu + 1]);
                                    }
                                }
                                else {
                                    this.CoTheDi.push([docCu + 1, ngangCu + 1]);
                                }
                            }
                            break;
                        }
                        case 'tuongdo1': {
                            let docCu = Math.round(this.oldPos.top / 75) + 9;
                            let ngangCu = Math.round(this.oldPos.left / 71) + 2;

                            // Chéo trên trái
                            if ((docCu === 9 && ngangCu === 2)
                                || (docCu === 7 && ngangCu === 4)
                                || (docCu === 9 && ngangCu === 6)
                                || (docCu === 7 && ngangCu === 8)) {
                                if (String(BanCo[docCu - 1][ngangCu - 1]) === "") {
                                    if (String(BanCo[docCu - 2][ngangCu - 2]) === "") {
                                        this.CoTheDi.push([docCu - 2, ngangCu - 2]);
                                    }
                                    else {
                                        if (String(BanCo[docCu - 2][ngangCu - 2]).includes("den")) {
                                            this.CoTheDi.push([docCu - 2, ngangCu - 2]);
                                        }
                                    }
                                }
                            }

                            // Chéo trên phải
                            if ((docCu === 7 && ngangCu === 0)
                                || (docCu === 9 && ngangCu === 2)
                                || (docCu === 7 && ngangCu === 4)
                                || (docCu === 9 && ngangCu === 6)) {
                                if (String(BanCo[docCu - 1][ngangCu + 1]) === "") {
                                    if (String(BanCo[docCu - 2][ngangCu + 2]) === "") {
                                        this.CoTheDi.push([docCu - 2, ngangCu + 2]);
                                    }
                                    else {
                                        if (String(BanCo[docCu - 2][ngangCu + 2]).includes("den")) {
                                            this.CoTheDi.push([docCu - 2, ngangCu + 2]);
                                        }
                                    }
                                }
                            }

                            // Chéo dưới trái
                            if ((docCu === 5 && ngangCu === 2)
                                || (docCu === 5 && ngangCu === 6)
                                || (docCu === 7 && ngangCu === 4)
                                || (docCu === 7 && ngangCu === 8)) {
                                if (String(BanCo[docCu + 1][ngangCu - 1]) === "") {
                                    if (String(BanCo[docCu + 2][ngangCu - 2]) === "") {
                                        this.CoTheDi.push([docCu + 2, ngangCu - 2]);
                                    }
                                    else {
                                        if (String(BanCo[docCu + 2][ngangCu - 2]).includes("den")) {
                                            this.CoTheDi.push([docCu + 2, ngangCu - 2]);
                                        }
                                    }
                                }
                            }

                            // Chéo dưới phải
                            if ((docCu === 5 && ngangCu === 2)
                                || (docCu === 5 && ngangCu === 6)
                                || (docCu === 7 && ngangCu === 4)
                                || (docCu === 7 && ngangCu === 0)) {
                                if (String(BanCo[docCu + 1][ngangCu + 1]) === "") {
                                    if (String(BanCo[docCu + 2][ngangCu + 2]) === "") {
                                        this.CoTheDi.push([docCu + 2, ngangCu + 2]);
                                    }
                                    else {
                                        if (String(BanCo[docCu + 2][ngangCu + 2]).includes("den")) {
                                            this.CoTheDi.push([docCu + 2, ngangCu + 2]);
                                        }
                                    }
                                }
                            }
                            break;
                        }
                        case 'tuongdo2': {
                            let docCu = Math.round(this.oldPos.top / 75) + 9;
                            let ngangCu = Math.round(this.oldPos.left / 71) + 6;

                            // Chéo trên trái
                            if ((docCu === 9 && ngangCu === 2)
                                || (docCu === 7 && ngangCu === 4)
                                || (docCu === 9 && ngangCu === 6)
                                || (docCu === 7 && ngangCu === 8)) {
                                if (String(BanCo[docCu - 1][ngangCu - 1]) === "") {
                                    if (String(BanCo[docCu - 2][ngangCu - 2]) === "") {
                                        this.CoTheDi.push([docCu - 2, ngangCu - 2]);
                                    }
                                    else {
                                        if (String(BanCo[docCu - 2][ngangCu - 2]).includes("den")) {
                                            this.CoTheDi.push([docCu - 2, ngangCu - 2]);
                                        }
                                    }
                                }
                            }

                            // Chéo trên phải
                            if ((docCu === 7 && ngangCu === 0)
                                || (docCu === 9 && ngangCu === 2)
                                || (docCu === 7 && ngangCu === 4)
                                || (docCu === 9 && ngangCu === 6)) {
                                if (String(BanCo[docCu - 1][ngangCu + 1]) === "") {
                                    if (String(BanCo[docCu - 2][ngangCu + 2]) === "") {
                                        this.CoTheDi.push([docCu - 2, ngangCu + 2]);
                                    }
                                    else {
                                        if (String(BanCo[docCu - 2][ngangCu + 2]).includes("den")) {
                                            this.CoTheDi.push([docCu - 2, ngangCu + 2]);
                                        }
                                    }
                                }
                            }

                            // Chéo dưới trái
                            if ((docCu === 5 && ngangCu === 2)
                                || (docCu === 5 && ngangCu === 6)
                                || (docCu === 7 && ngangCu === 4)
                                || (docCu === 7 && ngangCu === 8)) {
                                if (String(BanCo[docCu + 1][ngangCu - 1]) === "") {
                                    if (String(BanCo[docCu + 2][ngangCu - 2]) === "") {
                                        this.CoTheDi.push([docCu + 2, ngangCu - 2]);
                                    }
                                    else {
                                        if (String(BanCo[docCu + 2][ngangCu - 2]).includes("den")) {
                                            this.CoTheDi.push([docCu + 2, ngangCu - 2]);
                                        }
                                    }
                                }
                            }

                            // Chéo dưới phải
                            if ((docCu === 5 && ngangCu === 2)
                                || (docCu === 5 && ngangCu === 6)
                                || (docCu === 7 && ngangCu === 4)
                                || (docCu === 7 && ngangCu === 0)) {
                                if (String(BanCo[docCu + 1][ngangCu + 1]) === "") {
                                    if (String(BanCo[docCu + 2][ngangCu + 2]) === "") {
                                        this.CoTheDi.push([docCu + 2, ngangCu + 2]);
                                    }
                                    else {
                                        if (String(BanCo[docCu + 2][ngangCu + 2]).includes("den")) {
                                            this.CoTheDi.push([docCu + 2, ngangCu + 2]);
                                        }
                                    }
                                }
                            }
                            break;
                        }
                        case 'totdo1': {
                            let docCu = Math.round(this.oldPos.top / 75) + 6;
                            let ngangCu = Math.round(this.oldPos.left / 73) + 0;
                            if (docCu >= 5) {
                                // Đi thẳng
                                if (String(BanCo[docCu - 1][ngangCu]) === "") {
                                    this.CoTheDi.push([docCu - 1, ngangCu]);
                                }
                                else {
                                    if (String(BanCo[docCu - 1][ngangCu]).includes("den")) {
                                        this.CoTheDi.push([docCu - 1, ngangCu]);
                                    }
                                }
                            }
                            else {
                                // Đi thẳng
                                if (docCu - 1 >= 0) {
                                    if (String(BanCo[docCu - 1][ngangCu]) === "") {
                                        this.CoTheDi.push([docCu - 1, ngangCu]);
                                    }
                                    else {
                                        if (String(BanCo[docCu - 1][ngangCu]).includes("den")) {
                                            this.CoTheDi.push([docCu - 1, ngangCu]);
                                        }
                                    }
                                }
                                // Đi ngang trái
                                if (ngangCu - 1 >= 0) {
                                    if (String(BanCo[docCu][ngangCu - 1]) === "") {
                                        this.CoTheDi.push([docCu, ngangCu - 1]);
                                    }
                                    else {
                                        if (String(BanCo[docCu][ngangCu - 1]).includes("den")) {
                                            this.CoTheDi.push([docCu, ngangCu - 1]);
                                        }
                                    }
                                }
                                // Đi ngang phải
                                if (ngangCu + 1 <= 8) {
                                    if (String(BanCo[docCu][ngangCu + 1]) === "") {
                                        this.CoTheDi.push([docCu, ngangCu + 1]);
                                    }
                                    else {
                                        if (String(BanCo[docCu][ngangCu + 1]).includes("den")) {
                                            this.CoTheDi.push([docCu, ngangCu + 1]);
                                        }
                                    }
                                }
                            }
                            break;
                        }
                        case 'totdo2': {
                            let docCu = Math.round(this.oldPos.top / 75) + 6;
                            let ngangCu = Math.round(this.oldPos.left / 73) + 2;
                            if (docCu >= 5) {
                                // Đi thẳng
                                if (String(BanCo[docCu - 1][ngangCu]) === "") {
                                    this.CoTheDi.push([docCu - 1, ngangCu]);
                                }
                                else {
                                    if (String(BanCo[docCu - 1][ngangCu]).includes("den")) {
                                        this.CoTheDi.push([docCu - 1, ngangCu]);
                                    }
                                }
                            }
                            else {
                                // Đi thẳng
                                if (docCu - 1 >= 0) {
                                    if (String(BanCo[docCu - 1][ngangCu]) === "") {
                                        this.CoTheDi.push([docCu - 1, ngangCu]);
                                    }
                                    else {
                                        if (String(BanCo[docCu - 1][ngangCu]).includes("den")) {
                                            this.CoTheDi.push([docCu - 1, ngangCu]);
                                        }
                                    }
                                }
                                // Đi ngang trái
                                if (ngangCu - 1 >= 0) {
                                    if (String(BanCo[docCu][ngangCu - 1]) === "") {
                                        this.CoTheDi.push([docCu, ngangCu - 1]);
                                    }
                                    else {
                                        if (String(BanCo[docCu][ngangCu - 1]).includes("den")) {
                                            this.CoTheDi.push([docCu, ngangCu - 1]);
                                        }
                                    }
                                }
                                // Đi ngang phải
                                if (ngangCu + 1 <= 8) {
                                    if (String(BanCo[docCu][ngangCu + 1]) === "") {
                                        this.CoTheDi.push([docCu, ngangCu + 1]);
                                    }
                                    else {
                                        if (String(BanCo[docCu][ngangCu + 1]).includes("den")) {
                                            this.CoTheDi.push([docCu, ngangCu + 1]);
                                        }
                                    }
                                }
                            }
                            break;
                        }
                        case 'totdo3': {
                            let docCu = Math.round(this.oldPos.top / 75) + 6;
                            let ngangCu = Math.round(this.oldPos.left / 73) + 4;
                            if (docCu >= 5) {
                                // Đi thẳng
                                if (String(BanCo[docCu - 1][ngangCu]) === "") {
                                    this.CoTheDi.push([docCu - 1, ngangCu]);
                                }
                                else {
                                    if (String(BanCo[docCu - 1][ngangCu]).includes("den")) {
                                        this.CoTheDi.push([docCu - 1, ngangCu]);
                                    }
                                }
                            }
                            else {
                                // Đi thẳng
                                if (docCu - 1 >= 0) {
                                    if (String(BanCo[docCu - 1][ngangCu]) === "") {
                                        this.CoTheDi.push([docCu - 1, ngangCu]);
                                    }
                                    else {
                                        if (String(BanCo[docCu - 1][ngangCu]).includes("den")) {
                                            this.CoTheDi.push([docCu - 1, ngangCu]);
                                        }
                                    }
                                }
                                // Đi ngang trái
                                if (ngangCu - 1 >= 0) {
                                    if (String(BanCo[docCu][ngangCu - 1]) === "") {
                                        this.CoTheDi.push([docCu, ngangCu - 1]);
                                    }
                                    else {
                                        if (String(BanCo[docCu][ngangCu - 1]).includes("den")) {
                                            this.CoTheDi.push([docCu, ngangCu - 1]);
                                        }
                                    }
                                }
                                // Đi ngang phải
                                if (ngangCu + 1 <= 8) {
                                    if (String(BanCo[docCu][ngangCu + 1]) === "") {
                                        this.CoTheDi.push([docCu, ngangCu + 1]);
                                    }
                                    else {
                                        if (String(BanCo[docCu][ngangCu + 1]).includes("den")) {
                                            this.CoTheDi.push([docCu, ngangCu + 1]);
                                        }
                                    }
                                }
                            }
                            break;
                        }
                        case 'totdo4': {
                            let docCu = Math.round(this.oldPos.top / 75) + 6;
                            let ngangCu = Math.round(this.oldPos.left / 73) + 6;
                            if (docCu >= 5) {
                                // Đi thẳng
                                if (String(BanCo[docCu - 1][ngangCu]) === "") {
                                    this.CoTheDi.push([docCu - 1, ngangCu]);
                                }
                                else {
                                    if (String(BanCo[docCu - 1][ngangCu]).includes("den")) {
                                        this.CoTheDi.push([docCu - 1, ngangCu]);
                                    }
                                }
                            }
                            else {
                                // Đi thẳng
                                if (docCu - 1 >= 0) {
                                    if (String(BanCo[docCu - 1][ngangCu]) === "") {
                                        this.CoTheDi.push([docCu - 1, ngangCu]);
                                    }
                                    else {
                                        if (String(BanCo[docCu - 1][ngangCu]).includes("den")) {
                                            this.CoTheDi.push([docCu - 1, ngangCu]);
                                        }
                                    }
                                }
                                // Đi ngang trái
                                if (ngangCu - 1 >= 0) {
                                    if (String(BanCo[docCu][ngangCu - 1]) === "") {
                                        this.CoTheDi.push([docCu, ngangCu - 1]);
                                    }
                                    else {
                                        if (String(BanCo[docCu][ngangCu - 1]).includes("den")) {
                                            this.CoTheDi.push([docCu, ngangCu - 1]);
                                        }
                                    }
                                }
                                // Đi ngang phải
                                if (ngangCu + 1 <= 8) {
                                    if (String(BanCo[docCu][ngangCu + 1]) === "") {
                                        this.CoTheDi.push([docCu, ngangCu + 1]);
                                    }
                                    else {
                                        if (String(BanCo[docCu][ngangCu + 1]).includes("den")) {
                                            this.CoTheDi.push([docCu, ngangCu + 1]);
                                        }
                                    }
                                }
                            }
                            break;
                        }
                        case 'totdo5': {
                            let docCu = Math.round(this.oldPos.top / 75) + 6;
                            let ngangCu = Math.round(this.oldPos.left / 73) + 8;
                            if (docCu >= 5) {
                                // Đi thẳng
                                if (String(BanCo[docCu - 1][ngangCu]) === "") {
                                    this.CoTheDi.push([docCu - 1, ngangCu]);
                                }
                                else {
                                    if (String(BanCo[docCu - 1][ngangCu]).includes("den")) {
                                        this.CoTheDi.push([docCu - 1, ngangCu]);
                                    }
                                }
                            }
                            else {
                                // Đi thẳng
                                if (docCu - 1 >= 0) {
                                    if (String(BanCo[docCu - 1][ngangCu]) === "") {
                                        this.CoTheDi.push([docCu - 1, ngangCu]);
                                    }
                                    else {
                                        if (String(BanCo[docCu - 1][ngangCu]).includes("den")) {
                                            this.CoTheDi.push([docCu - 1, ngangCu]);
                                        }
                                    }
                                }
                                // Đi ngang trái
                                if (ngangCu - 1 >= 0) {
                                    if (String(BanCo[docCu][ngangCu - 1]) === "") {
                                        this.CoTheDi.push([docCu, ngangCu - 1]);
                                    }
                                    else {
                                        if (String(BanCo[docCu][ngangCu - 1]).includes("den")) {
                                            this.CoTheDi.push([docCu, ngangCu - 1]);
                                        }
                                    }
                                }
                                // Đi ngang phải
                                if (ngangCu + 1 <= 8) {
                                    if (String(BanCo[docCu][ngangCu + 1]) === "") {
                                        this.CoTheDi.push([docCu, ngangCu + 1]);
                                    }
                                    else {
                                        if (String(BanCo[docCu][ngangCu + 1]).includes("den")) {
                                            this.CoTheDi.push([docCu, ngangCu + 1]);
                                        }
                                    }
                                }
                            }
                            break;
                        }
                    }
                },
                drag: function () {

                },
                stop: function (event, ui) {
                    //console.log('top=' + ui.position.top + '  left=' + ui.position.left);

                    let x = this.pos.top;
                    let y = this.pos.left;

                    const pos = ui.position;

                    switch (ui.helper.attr('id')) {
                        // [9, 0] -> Xong
                        case 'xedo1': {
                            if (pos.left < -15 || pos.left > 595 || pos.top > 8 || pos.top < -685) {
                                $('#xedo1').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                X = Math.abs(this.oldPos.left - pos.left) > 35 ? Math.round(this.oldPos.top / 75) * 75 : Math.round(pos.top / 75) * 75;
                                Y = Math.abs(this.oldPos.top - pos.top) > 35 ? Math.round(this.oldPos.left / 73) * 73 : Math.round(pos.left / 73) * 73;

                                let docMoi = Math.round(X / 75) + 9;
                                let ngangMoi = Math.round(Y / 71) + 0;
                                let docCu = Math.round(this.oldPos.top / 75) + 9;
                                let ngangCu = Math.round(this.oldPos.left / 71) + 0;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "xedo1";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#xedo1').offset({ top: X + xeDo1[0], left: Y + xeDo1[1] });
                                    return;
                                }
                                else {
                                    $('#xedo1').offset({ top: x, left: y });
                                    return;
                                }
                                return;
                            }
                            break;
                        }
                        // [9, 8] -> Xong
                        case 'xedo2': {
                            if (pos.left < -585 || pos.left > 15 || pos.top > 8 || pos.top < -675) {
                                $('#xedo2').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                X = Math.abs(this.oldPos.left - pos.left) > 35 ? Math.round(this.oldPos.top / 75) * 75 : Math.round(pos.top / 75) * 75;
                                Y = Math.abs(this.oldPos.top - pos.top) > 35 ? Math.round(this.oldPos.left / 73) * 73 : Math.round(pos.left / 73) * 73;

                                let docMoi = Math.round(X / 75) + 9;
                                let ngangMoi = Math.round(Y / 71) + 8;
                                let docCu = Math.round(this.oldPos.top / 75) + 9;
                                let ngangCu = Math.round(this.oldPos.left / 71) + 8;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "xedo2";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#xedo2').offset({ top: X + xeDo2[0], left: Y + xeDo2[1] });
                                    return;
                                }
                                else {
                                    $('#xedo2').offset({ top: x, left: y });
                                    return;
                                }

                                return;
                            }
                            break;
                        }
                        // [7, 1]
                        case 'phaodo1': {
                            if (pos.left < -80 || pos.left > 520 || pos.top > 160 || pos.top < -540) {
                                $('#phaodo1').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                X = Math.abs(this.oldPos.left - pos.left) > 35 ? Math.round(this.oldPos.top / 75) * 75 : Math.round(pos.top / 75) * 75;
                                Y = Math.abs(this.oldPos.top - pos.top) > 35 ? Math.round(this.oldPos.left / 73) * 73 : Math.round(pos.left / 73) * 73;

                                let docMoi = Math.round(X / 75) + 7;
                                let ngangMoi = Math.round(Y / 71) + 1;
                                let docCu = Math.round(this.oldPos.top / 75) + 7;
                                let ngangCu = Math.round(this.oldPos.left / 71) + 1;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "phaodo1";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#phaodo1').offset({ top: X + phaoDo1[0], left: Y + phaoDo1[1] });
                                    return;
                                }
                                else {
                                    $('#phaodo1').offset({ top: x, left: y });
                                    return;
                                }

                                return;
                            }
                            break;
                        }
                        // [7, 7]
                        case 'phaodo2': {
                            if (pos.left < -525 || pos.left > 80 || pos.top > 160 || pos.top < -530) {
                                $('#phaodo2').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                X = Math.abs(this.oldPos.left - pos.left) > 35 ? Math.round(this.oldPos.top / 75) * 75 : Math.round(pos.top / 75) * 75;
                                Y = Math.abs(this.oldPos.top - pos.top) > 35 ? Math.round(this.oldPos.left / 73) * 73 : Math.round(pos.left / 73) * 73;

                                let docMoi = Math.round(X / 75) + 7;
                                let ngangMoi = Math.round(Y / 71) + 7;
                                let docCu = Math.round(this.oldPos.top / 75) + 7;
                                let ngangCu = Math.round(this.oldPos.left / 71) + 7;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "phaodo2";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#phaodo2').offset({ top: X + phaoDo2[0], left: Y + phaoDo2[1] });
                                    return;
                                }
                                else {
                                    $('#phaodo2').offset({ top: x, left: y });
                                    return;
                                }

                                return;
                            }
                            break;
                        }
                        // [9, 1]
                        case 'mado1': {
                            if (pos.left < -80 || pos.left > 515 || pos.top > 5 || pos.top < -675) {
                                $('#mado1').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                if (this.oldPos.top > pos.top) {
                                    if (this.oldPos.left > pos.left) {
                                        if (Math.abs(pos.top - this.oldPos.top) > 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 150;
                                        }
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) > 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 150;
                                        }
                                    }
                                }
                                else {
                                    if (this.oldPos.left > pos.left) {
                                        if (Math.abs(pos.top - this.oldPos.top) < 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 150;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 75;
                                        }
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) < 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 150;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 75;
                                        }
                                    }
                                }
                                if (Y == -150 || Y == 600 || X == 75 || X == -750) {
                                    $('#mado1').offset({ top: x, left: y });
                                    return;
                                }
                                else {
                                    $('#mado1').offset({ top: X + maDo1[0], left: Y + maDo1[1] });
                                    return;
                                }
                            }
                            break;
                        }
                        // [9, 7]
                        case 'mado2': {
                            if (pos.left < -520 || pos.left > 75 || pos.top > 5 || pos.top < -675) {
                                $('#mado2').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                if (this.oldPos.top > pos.top) {
                                    if (this.oldPos.left > pos.left) {
                                        if (Math.abs(pos.top - this.oldPos.top) > 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 150;
                                        }
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) > 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 150;
                                        }
                                    }
                                }
                                else {
                                    if (this.oldPos.left > pos.left) {
                                        if (Math.abs(pos.top - this.oldPos.top) < 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 150;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 75;
                                        }
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) < 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 150;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 75;
                                        }
                                    }
                                }
                                if (X == 75 || X == -750 || Y == -600 || Y == 150) {
                                    $('#mado2').offset({ top: x, left: y });
                                    return;
                                }
                                else {
                                    $('#mado2').offset({ top: X + maDo2[0], left: Y + maDo2[1] });
                                    return;
                                }
                            }
                            break;
                        }
                        // [9, 4]
                        case 'tuongdo': {
                            if (pos.left < -80 || pos.left > 80 || pos.top < -155 || pos.top > 5) {
                                $('#tuongdo').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                if (Math.abs(this.oldPos.top - pos.top) > 80 || Math.abs(this.oldPos.left - pos.left) > 80) {
                                    $('#tuongdo').offset({ top: x, left: y });
                                    return;
                                }
                                if (Math.abs(this.oldPos.top - pos.top) > 35) {
                                    Y = Math.round(this.oldPos.left / 71) * 71;
                                }
                                else {
                                    if (Math.abs(pos.left) % 71 > 35) {
                                        Y = pos.left > 0 ? Math.ceil(Math.abs(pos.left) / 73) * 73 : -(Math.ceil(Math.abs(pos.left) / 73) * 73);
                                    }
                                    else {
                                        Y = pos.left > 0 ? Math.floor(Math.abs(pos.left) / 73) * 73 : -(Math.floor(Math.abs(pos.left) / 73) * 73);
                                    }
                                }
                                if (Math.abs(this.oldPos.left - pos.left) > 35) {
                                    X = Math.round(this.oldPos.top / 75) * 75;
                                }
                                else {
                                    if (Math.abs(pos.top) % 75 > 35) {
                                        X = pos.top > 0 ? Math.ceil(Math.abs(pos.top) / 75) * 75 : -(Math.ceil(Math.abs(pos.top) / 75) * 75);
                                    }
                                    else {
                                        X = pos.top > 0 ? Math.floor(Math.abs(pos.top) / 75) * 75 : -(Math.floor(Math.abs(pos.top) / 75) * 75);
                                    }
                                }

                                let docMoi = Math.round(X / 75) + 9;
                                let ngangMoi = Math.round(Y / 71) + 4;
                                let docCu = Math.round(this.oldPos.top / 75) + 9;
                                let ngangCu = Math.round(this.oldPos.left / 71) + 4;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "tuongdo";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#tuongdo').offset({ top: X + tuongDo[0], left: Y + tuongDo[1] });
                                    return;
                                }
                                else {
                                    $('#tuongdo').offset({ top: x, left: y });
                                    return;
                                }
                            }
                            break;
                        }
                        // [9, 3]
                        case 'sido1': {
                            if (pos.left < -5 || pos.left > 155 || pos.top < -160 || pos.top > 0) {
                                $('#sido1').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                if (Math.abs(this.oldPos.top - pos.top) < 25 || Math.abs(this.oldPos.left - pos.left) < 25) {
                                    X = this.oldPos.top - (this.oldPos.top % 75);
                                    Y = this.oldPos.left - (this.oldPos.left % 75);
                                }
                                else {
                                    X = this.oldPos.top > pos.top ? (this.oldPos.top - (this.oldPos.top % 75)) - 75 : (this.oldPos.top - (this.oldPos.top % 75)) + 75;
                                    Y = this.oldPos.left > pos.left ? (this.oldPos.left - (this.oldPos.left % 75)) - 75 : (this.oldPos.left - (this.oldPos.left % 75)) + 75;
                                }

                                let docMoi = Math.round(X / 75) + 9;
                                let ngangMoi = Math.round(Y / 71) + 3;
                                let docCu = Math.round(this.oldPos.top / 75) + 9;
                                let ngangCu = Math.round(this.oldPos.left / 71) + 3;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "sido1";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#sido1').offset({ top: X + siDo1[0], left: Y + siDo1[1] });
                                    return;
                                }
                                else {
                                    $('#sido1').offset({ top: x, left: y });
                                    return;
                                }
                            }
                            break;
                        }
                        // [9, 5]
                        case 'sido2': {
                            if (pos.left < -155 || pos.left > 5 || pos.top > 5 || pos.top < -155) {
                                $('#sido2').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                if (Math.abs(this.oldPos.top - pos.top) < 25 || Math.abs(this.oldPos.left - pos.left) < 25) {
                                    X = this.oldPos.top - (this.oldPos.top % 75);
                                    Y = this.oldPos.left - (this.oldPos.left % 75);
                                }
                                else {
                                    X = this.oldPos.top > pos.top ? (this.oldPos.top - (this.oldPos.top % 75)) - 75 : (this.oldPos.top - (this.oldPos.top % 75)) + 75;
                                    Y = this.oldPos.left > pos.left ? (this.oldPos.left - (this.oldPos.left % 75)) - 75 : (this.oldPos.left - (this.oldPos.left % 75)) + 75;
                                }

                                let docMoi = Math.round(X / 75) + 9;
                                let ngangMoi = Math.round(Y / 71) + 5;
                                let docCu = Math.round(this.oldPos.top / 75) + 9;
                                let ngangCu = Math.round(this.oldPos.left / 71) + 5;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "sido2";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#sido2').offset({ top: X + siDo2[0], left: Y + siDo2[1] });
                                    return;
                                }
                                else {
                                    $('#sido2').offset({ top: x, left: y });
                                    return;
                                }
                            }
                            break;
                        }
                        // [9, 2]
                        case 'tuongdo1': {
                            if (pos.left < -160 || pos.left > 445 || pos.top > 5 || pos.top < -305) {
                                $('#tuongdo1').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                if (Math.abs(this.oldPos.top - pos.top) < 55 || Math.abs(this.oldPos.left - pos.left) < 55) {
                                    X = this.oldPos.top - (this.oldPos.top % 146);
                                    Y = this.oldPos.left - (this.oldPos.left % 146);
                                }
                                else {
                                    X = this.oldPos.top > pos.top ? (this.oldPos.top - (this.oldPos.top % 146)) - 146 : (this.oldPos.top - (this.oldPos.top % 146)) + 146;
                                    Y = this.oldPos.left > pos.left ? (this.oldPos.left - (this.oldPos.left % 146)) - 146 : (this.oldPos.left - (this.oldPos.left % 146)) + 146;
                                }

                                let docMoi = Math.round(X / 75) + 9;
                                let ngangMoi = Math.round(Y / 71) + 2;
                                let docCu = Math.round(this.oldPos.top / 75) + 9;
                                let ngangCu = Math.round(this.oldPos.left / 71) + 2;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "tuongdo1";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#tuongdo1').offset({ top: X + tuongDo1[0], left: Y + tuongDo1[1] });
                                    return;
                                }
                                else {
                                    $('#tuongdo1').offset({ top: x, left: y });
                                    return;
                                }
                            }
                            break;
                        }
                        // [9, 6]
                        case 'tuongdo2': {
                            if (pos.left < -445 || pos.left > 155 || pos.top > 5 || pos.top < -305) {
                                $('#tuongdo2').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                if (Math.abs(this.oldPos.top - pos.top) < 55 || Math.abs(this.oldPos.left - pos.left) < 55) {
                                    X = this.oldPos.top - (this.oldPos.top % 146);
                                    Y = this.oldPos.left - (this.oldPos.left % 146);
                                }
                                else {
                                    X = this.oldPos.top > pos.top ? (this.oldPos.top - (this.oldPos.top % 146)) - 146 : (this.oldPos.top - (this.oldPos.top % 146)) + 146;
                                    Y = this.oldPos.left > pos.left ? (this.oldPos.left - (this.oldPos.left % 146)) - 146 : (this.oldPos.left - (this.oldPos.left % 146)) + 146;
                                }

                                let docMoi = Math.round(X / 75) + 9;
                                let ngangMoi = Math.round(Y / 71) + 6;
                                let docCu = Math.round(this.oldPos.top / 75) + 9;
                                let ngangCu = Math.round(this.oldPos.left / 71) + 6;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "tuongdo2";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#tuongdo2').offset({ top: X + tuongDo2[0], left: Y + tuongDo2[1] });
                                    return;
                                }
                                else {
                                    $('#tuongdo2').offset({ top: x, left: y });
                                    return;
                                }
                            }
                            break;
                        }
                        // [6, 0]
                        case 'totdo1': {
                            if (pos.left < -30 || pos.left > 585 || pos.top > 5 || pos.top < -460) {
                                $('#totdo1').offset({ top: x, left: y });
                                return;
                            }
                            if (pos.top > this.oldPos.top) {
                                $('#totdo1').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;

                                X = Math.abs(this.oldPos.left - pos.left) > 45 ? Math.round(this.oldPos.top / 75) * 75 : Math.round(pos.top / 75) * 75;
                                Y = Math.abs(this.oldPos.top - pos.top) > 45 ? Math.round(this.oldPos.left / 73) * 73 : Math.round(pos.left / 73) * 73;

                                let docMoi = Math.round(X / 75) + 6;
                                let ngangMoi = Math.round(Y / 73) + 0;
                                let docCu = Math.round(this.oldPos.top / 75) + 6;
                                let ngangCu = Math.round(this.oldPos.left / 73) + 0;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "totdo1";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#totdo1').offset({ top: X + totDo1[0], left: Y + totDo1[1] });
                                    return;
                                }
                                else {
                                    $('#totdo1').offset({ top: x, left: y });
                                    return;
                                }
                                return;
                            }
                            break;
                        }
                        // [6, 2]
                        case 'totdo2': {
                            if (pos.left < -150 || pos.left > 440 || pos.top > 5 || pos.top < -455) {
                                $('#totdo2').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;

                                X = Math.abs(this.oldPos.left - pos.left) > 45 ? Math.round(this.oldPos.top / 75) * 75 : Math.round(pos.top / 75) * 75;
                                Y = Math.abs(this.oldPos.top - pos.top) > 45 ? Math.round(this.oldPos.left / 73) * 73 : Math.round(pos.left / 73) * 73;

                                let docMoi = Math.round(X / 75) + 6;
                                let ngangMoi = Math.round(Y / 73) + 2;
                                let docCu = Math.round(this.oldPos.top / 75) + 6;
                                let ngangCu = Math.round(this.oldPos.left / 73) + 2;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "totdo2";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#totdo2').offset({ top: X + totDo2[0], left: Y + totDo2[1] });
                                    return;
                                }
                                else {
                                    $('#totdo2').offset({ top: x, left: y });
                                    return;
                                }
                                return;
    
                            }
                            break;
                        }
                        // [6, 4]
                        case 'totdo3': {
                            if (pos.left < -295 || pos.left > 295 || pos.top > 5 || pos.top < -455) {
                                $('#totdo3').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;

                                X = Math.abs(this.oldPos.left - pos.left) > 45 ? Math.round(this.oldPos.top / 75) * 75 : Math.round(pos.top / 75) * 75;
                                Y = Math.abs(this.oldPos.top - pos.top) > 45 ? Math.round(this.oldPos.left / 73) * 73 : Math.round(pos.left / 73) * 73;

                                let docMoi = Math.round(X / 75) + 6;
                                let ngangMoi = Math.round(Y / 73) + 4;
                                let docCu = Math.round(this.oldPos.top / 75) + 6;
                                let ngangCu = Math.round(this.oldPos.left / 73) + 4;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "totdo3";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#totdo3').offset({ top: X + totDo3[0], left: Y + totDo3[1] });
                                    return;
                                }
                                else {
                                    $('#totdo3').offset({ top: x, left: y });
                                    return;
                                }
                                return;
                            }
                            break;
                        }
                        // [6, 6]
                        case 'totdo4': {
                            if (pos.left < -440 || pos.left > 150 || pos.top > 5 || pos.top < -455) {
                                $('#totdo4').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;

                                X = Math.abs(this.oldPos.left - pos.left) > 45 ? Math.round(this.oldPos.top / 75) * 75 : Math.round(pos.top / 75) * 75;
                                Y = Math.abs(this.oldPos.top - pos.top) > 45 ? Math.round(this.oldPos.left / 73) * 73 : Math.round(pos.left / 73) * 73;

                                let docMoi = Math.round(X / 75) + 6;
                                let ngangMoi = Math.round(Y / 73) + 6;
                                let docCu = Math.round(this.oldPos.top / 75) + 6;
                                let ngangCu = Math.round(this.oldPos.left / 73) + 6;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "totdo4";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#totdo4').offset({ top: X + totDo4[0], left: Y + totDo4[1] });
                                    return;
                                }
                                else {
                                    $('#totdo4').offset({ top: x, left: y });
                                    return;
                                }
                                return;
                            }
                            break;
                        }
                        // [6, 8]
                        case 'totdo5': {
                            if (pos.left < -580 || pos.left > 10 || pos.top > 5 || pos.top < -455) {
                                $('#totdo5').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;

                                X = Math.abs(this.oldPos.left - pos.left) > 45 ? Math.round(this.oldPos.top / 75) * 75 : Math.round(pos.top / 75) * 75;
                                Y = Math.abs(this.oldPos.top - pos.top) > 45 ? Math.round(this.oldPos.left / 73) * 73 : Math.round(pos.left / 73) * 73;

                                let docMoi = Math.round(X / 75) + 6;
                                let ngangMoi = Math.round(Y / 73) + 8;
                                let docCu = Math.round(this.oldPos.top / 75) + 6;
                                let ngangCu = Math.round(this.oldPos.left / 73) + 8;

                                let isContain = false;
                                for (let i = 0; i < this.CoTheDi.length; ++i) {
                                    if (parseInt(this.CoTheDi[i][0]) == parseInt(docMoi)
                                        && parseInt(this.CoTheDi[i][1]) == parseInt(ngangMoi)) {
                                        isContain = true;
                                        break;
                                    }
                                }

                                if (isContain === true) {
                                    $("#" + String(BanCo[docMoi][ngangMoi])).css("visibility", "hidden");
                                    BanCo[docMoi][ngangMoi] = "totdo5";
                                    BanCo[docCu][ngangCu] = "";
                                    $('#totdo5').offset({ top: X + totDo5[0], left: Y + totDo5[1] });
                                    return;
                                }
                                else {
                                    $('#totdo5').offset({ top: x, left: y });
                                    return;
                                }
                                return;
                            }
                            break;
                        }

                        case 'xeden1': {
                            if (pos.left < 0 || pos.left > 585 || pos.top < -5 || pos.top > 670) {
                                $('#xeden1').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;

                                if (Math.abs(this.oldPos.top - pos.top) > 35) {
                                    Y = this.oldPos.left > 0 ? LamTron(this.oldPos.left, 75) : -LamTron(this.oldPos.left, 75);
                                }
                                else {
                                    if (Math.abs(pos.left) % 75 > 35) {
                                        Y = pos.left > 0 ? LamTron(pos.left, 75) + 75 : -LamTron(pos.left, 75) - 75;
                                    }
                                    else {
                                        Y = pos.left > 0 ? LamTron(pos.left, 75) : -LamTron(pos.left, 75);
                                    }
                                }

                                if (Math.abs(this.oldPos.left - pos.left) > 35) {
                                    X = this.oldPos.top > 0 ? LamTron(this.oldPos.top, 75) + 75 : -LamTron(this.oldPos.top, 75) - 75;
                                }
                                else {
                                    if (Math.abs(pos.top) % 75 > 35) {
                                        X = pos.top > 0 ? LamTron(pos.top, 75) + 75 : -LamTron(pos.top, 75) - 75;
                                    }
                                    else {
                                        X = pos.top > 0 ? LamTron(pos.top, 75) : -LamTron(pos.top, 75);
                                    }
                                }

                                $('#xeden1').offset({ top: X + xeDen1[0], left: Y + xeDen1[1] });
                                return;
                            }
                            break;
                        }
                        case 'xeden2': {
                            if (pos.left < -585 || pos.left > 5 || pos.top < -5 || pos.top > 670) {
                                $('#xeden2').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;

                                if (Math.abs(this.oldPos.top - pos.top) > 35) {
                                    Y = this.oldPos.left > 0 ? LamTron(this.oldPos.left, 75) : -LamTron(this.oldPos.left, 75);
                                }
                                else {
                                    if (Math.abs(pos.left) % 75 > 35) {
                                        Y = pos.left > 0 ? LamTron(pos.left, 75) + 75 : -LamTron(pos.left, 75) - 75;
                                    }
                                    else {
                                        Y = pos.left > 0 ? LamTron(pos.left, 75) : -LamTron(pos.left, 75);
                                    }
                                }

                                if (Math.abs(this.oldPos.left - pos.left) > 35) {
                                    X = this.oldPos.top > 0 ? LamTron(this.oldPos.top, 75) + 75 : -LamTron(this.oldPos.top, 75) - 75;
                                }
                                else {
                                    if (Math.abs(pos.top) % 75 > 35) {
                                        X = pos.top > 0 ? LamTron(pos.top, 75) + 75 : -LamTron(pos.top, 75) - 75;
                                    }
                                    else {
                                        X = pos.top > 0 ? LamTron(pos.top, 75) : -LamTron(pos.top, 75);
                                    }
                                }

                                $('#xeden2').offset({ top: X + xeDen2[0], left: Y + xeDen2[1] });
                                return;
                            }
                            break;
                        }
                        case 'phaoden1': {
                            if (pos.left < -75 || pos.left > 515 || pos.top < -150 || pos.top > 525) {
                                $('#phaoden1').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;

                                if (Math.abs(this.oldPos.top - pos.top) > 35) {
                                    Y = this.oldPos.left > 0 ? LamTron(this.oldPos.left, 75) : -LamTron(this.oldPos.left, 75);
                                }
                                else {
                                    if (Math.abs(pos.left) % 75 > 35) {
                                        Y = pos.left > 0 ? LamTron(pos.left, 75) + 75 : -LamTron(pos.left, 75) - 75;
                                    }
                                    else {
                                        Y = pos.left > 0 ? LamTron(pos.left, 75) : -LamTron(pos.left, 75);
                                    }
                                }

                                if (Math.abs(this.oldPos.left - pos.left) > 35) {
                                    X = this.oldPos.top > 0 ? LamTron(this.oldPos.top, 75) : -LamTron(this.oldPos.top, 75);
                                }
                                else {
                                    if (Math.abs(pos.top) % 75 > 35) {
                                        X = pos.top > 0 ? LamTron(pos.top, 75) + 75 : -LamTron(pos.top, 75) - 75;
                                    }
                                    else {
                                        X = pos.top > 0 ? LamTron(pos.top, 75) : -LamTron(pos.top, 75);
                                    }
                                }

                                $('#phaoden1').offset({ top: X + phaoDen1[0], left: Y + phaoDen1[1] });
                                return;
                            }
                            break;
                        }
                        case 'phaoden2': {
                            if (pos.left < -515 || pos.left > 75 || pos.top < -150 || pos.top > 525) {
                                $('#phaoden2').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;

                                if (Math.abs(this.oldPos.top - pos.top) > 35) {
                                    Y = this.oldPos.left > 0 ? this.oldPos.left : -this.oldPos.left;
                                }
                                else {
                                    if (Math.abs(pos.left) % 75 > 35) {
                                        Y = pos.left > 0 ? LamTron(pos.left, 75) + 75 : -LamTron(pos.left, 75) - 75;
                                    }
                                    else {
                                        Y = pos.left > 0 ? LamTron(pos.left, 75) : -LamTron(pos.left, 75);
                                    }
                                }
                                if (Math.abs(this.oldPos.left - pos.left) > 35) {
                                    X = this.oldPos.top > 0 ? this.oldPos.top : -this.oldPos.top;
                                }
                                else {
                                    if (Math.abs(pos.top) % 75 > 35) {
                                        X = pos.top > 0 ? LamTron(pos.top, 75) + 75 : -LamTron(pos.top, 75) - 75;
                                    }
                                    else {
                                        X = pos.top > 0 ? LamTron(pos.top, 75) : -LamTron(pos.top, 75);
                                    }
                                }

                                $('#phaoden2').offset({ top: X + phaoDen2[0], left: Y + phaoDen2[1] });
                                return;
                            }
                            break;
                        }
                        case 'maden1': {
                            if (pos.left < -75 || pos.left > 515 || pos.top < -10 || pos.top > 675) {
                                $('#maden1').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                if (this.oldPos.top > pos.top) {
                                    if (this.oldPos.left > pos.left) {
                                        if (Math.abs(pos.top - this.oldPos.top) > 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 150;
                                        }
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) > 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 150;
                                        }
                                    }
                                }
                                else {
                                    if (this.oldPos.left > pos.left) {
                                        if (Math.abs(pos.top - this.oldPos.top) < 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 150;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 75;
                                        }
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) < 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 150;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 75;
                                        }
                                    }
                                }
                                if (X == -75 || X == 750 || Y == -150 || Y == 600) {
                                    $('#maden1').offset({ top: x, left: y });
                                    return;
                                }
                                else {
                                    $('#maden1').offset({ top: X + maDen1[0], left: Y + maDen1[1] });
                                    return;
                                }
                            }
                            break;
                        }
                        case 'maden2': {
                            if (pos.left < -515 || pos.left > 75 || pos.top < -10 || pos.top > 675) {
                                $('#maden2').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                if (this.oldPos.top > pos.top) {
                                    if (this.oldPos.left > pos.left) {
                                        if (Math.abs(pos.top - this.oldPos.top) > 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 150;
                                        }
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) > 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 - 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 150;
                                        }
                                    }
                                }
                                else {
                                    if (this.oldPos.left > pos.left) {
                                        if (Math.abs(pos.top - this.oldPos.top) < 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 150;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 - 75;
                                        }
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) < 75) {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 75;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 150;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75 + 150;
                                            Y = Math.ceil(this.oldPos.left / 75) * 75 + 75;
                                        }
                                    }
                                }
                                if (X == -75 || X == 750 || Y == 150 || Y == -600) {
                                    $('#maden2').offset({ top: x, left: y });
                                    return;
                                }
                                else {
                                    $('#maden2').offset({ top: X + maDen2[0], left: Y + maDen2[1] });
                                    return;
                                }
                            }
                            break;
                        }
                        case 'tuongden': {
                            if (pos.left < -75 || pos.left > 75 || pos.top < -10 || pos.top > 150) {
                                $('#tuongden').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                if (Math.abs(this.oldPos.top - pos.top) > 80 || Math.abs(this.oldPos.left - pos.left) > 80) {
                                    $('#tuongden').offset({ top: x, left: y });
                                    return;
                                }
                                let X = 0, Y = 0;

                                if (Math.abs(this.oldPos.top - pos.top) > 35) {
                                    Y = this.oldPos.left;
                                }
                                else {
                                    if (Math.abs(pos.left - this.oldPos.left) > 35) {
                                        Y = pos.left > this.oldPos.left ? (Math.ceil(this.oldPos.left / 75) * 75) + 75 : (Math.ceil(this.oldPos.left / 75) * 75) - 75;
                                    }
                                    else {
                                        Y = this.oldPos.left;
                                    }
                                }

                                if (Math.abs(this.oldPos.left - pos.left) > 35) {
                                    X = this.oldPos.top;
                                }
                                else {
                                    if (Math.abs(pos.top - this.oldPos.top) > 35) {
                                        X = pos.top > this.oldPos.top ? (Math.ceil(this.oldPos.top / 75) * 75) + 75 : (Math.ceil(this.oldPos.top / 75) * 75) - 75;
                                    }
                                    else {
                                        X = this.oldPos.top;
                                    }
                                }

                                $('#tuongden').offset({ top: X + tuongDen[0], left: Y + tuongDen[1] });
                                return;
                            }
                            break;
                        }
                        case 'siden1': {
                            if (pos.left < -5 || pos.left > 155 || pos.top < -5 || pos.top > 150) {
                                $('#siden1').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                if (Math.abs(this.oldPos.top - pos.top) < 25 || Math.abs(this.oldPos.left - pos.left) < 25) {
                                    $('#siden1').offset({ top: x, left: y });
                                    return;
                                }
                                else {
                                    if (this.oldPos.top < pos.top) {
                                        if (this.oldPos.left < pos.left) {
                                            X = (Math.ceil(this.oldPos.top / 75) * 75) + 75;
                                            Y = this.oldPos.left + 75;
                                        }
                                        else {
                                            X = (Math.ceil(this.oldPos.top / 75) * 75) + 75;
                                            Y = this.oldPos.left - 75;
                                        }
                                    }
                                    else {
                                        if (this.oldPos.left < pos.left) {
                                            X = (Math.ceil(this.oldPos.top / 75) * 75) - 75;
                                            Y = this.oldPos.left + 75;
                                        }
                                        else {
                                            X = (Math.ceil(this.oldPos.top / 75) * 75) - 75;
                                            Y = this.oldPos.left - 75;
                                        }
                                    }
                                }
                                $('#siden1').offset({ top: X + siDen1[0], left: Y + siDen1[1] });
                                return;
                            }
                            break;
                        }
                        case 'siden2': {
                            if (pos.left < -155 || pos.left > 0 || pos.top < -5 || pos.top > 150) {
                                $('#siden2').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                if (this.oldPos.top < pos.top) {
                                    if (this.oldPos.left < pos.left) {
                                        X = (Math.ceil(this.oldPos.top / 75) * 75) + 75;
                                        Y = this.oldPos.left + 75;
                                    }
                                    else {
                                        X = (Math.ceil(this.oldPos.top / 75) * 75) + 75;
                                        Y = this.oldPos.left - 75;
                                    }
                                }
                                else {
                                    if (this.oldPos.left < pos.left) {
                                        X = (Math.ceil(this.oldPos.top / 75) * 75) - 75;
                                        Y = this.oldPos.left + 75;
                                    }
                                    else {
                                        X = (Math.ceil(this.oldPos.top / 75) * 75) - 75;
                                        Y = this.oldPos.left - 75;
                                    }
                                }
                                $('#siden2').offset({ top: X + siDen2[0], left: Y + siDen2[1] });
                                return;
                            }
                            break;
                        }
                        case 'tuongden1': {
                            if (pos.left < -155 || pos.left > 445 || pos.top < -10 || pos.top > 295) {
                                $('#tuongden1').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                if (Math.abs(this.oldPos.top - pos.top) < 75 || Math.abs(this.oldPos.left - pos.left) < 75) {
                                    $('#tuongden1').offset({ top: x, left: y });
                                    return;
                                }
                                else {
                                    if (this.oldPos.top < pos.top) {
                                        if (this.oldPos.left < pos.left) {
                                            X = (Math.ceil(this.oldPos.top / 150) * 150) + 150;
                                            Y = this.oldPos.left + 150;
                                        }
                                        else {
                                            X = (Math.ceil(this.oldPos.top / 150) * 150) + 150;
                                            Y = this.oldPos.left - 150;
                                        }
                                    }
                                    else {
                                        if (this.oldPos.left < pos.left) {
                                            X = (Math.ceil(this.oldPos.top / 150) * 150) - 150;
                                            Y = this.oldPos.left + 150;
                                        }
                                        else {
                                            X = (Math.ceil(this.oldPos.top / 150) * 150) - 150;
                                            Y = this.oldPos.left - 150;
                                        }
                                    }
                                }
                                $('#tuongden1').offset({ top: X + tuongDen1[0], left: Y + tuongDen1[1] });
                                return;
                            }
                            break;
                        }
                        case 'tuongden2': {
                            if (pos.left < -445 || pos.left > 150 || pos.top < -10 || pos.top > 295) {
                                $('#tuongden2').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                let X = 0, Y = 0;
                                if (Math.abs(this.oldPos.top - pos.top) < 75 || Math.abs(this.oldPos.left - pos.left) < 75) {
                                    $('#tuongden2').offset({ top: x, left: y });
                                    return;
                                }
                                else {
                                    if (this.oldPos.top < pos.top) {
                                        if (this.oldPos.left < pos.left) {
                                            X = (Math.ceil(this.oldPos.top / 150) * 150) + 150;
                                            Y = this.oldPos.left + 150;
                                        }
                                        else {
                                            X = (Math.ceil(this.oldPos.top / 150) * 150) + 150;
                                            Y = this.oldPos.left - 150;
                                        }
                                    }
                                    else {
                                        if (this.oldPos.left < pos.left) {
                                            X = (Math.ceil(this.oldPos.top / 150) * 150) - 150;
                                            Y = this.oldPos.left + 150;
                                        }
                                        else {
                                            X = (Math.ceil(this.oldPos.top / 150) * 150) - 150;
                                            Y = this.oldPos.left - 150;
                                        }
                                    }
                                }
                                $('#tuongden2').offset({ top: X + tuongDen2[0], left: Y + tuongDen2[1] });
                                return;
                            }
                            break;
                        }
                        case 'totden1': {
                            if (pos.left < -20 || pos.left > 595 || pos.top < -10 || pos.top > 460) {
                                $('#totden1').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                if (this.oldPos.top > pos.top || Math.abs(this.oldPos.top - pos.top) > 80 || Math.abs(this.oldPos.left - pos.left) > 80) {
                                    $('#totden1').offset({ top: x, left: y });
                                    return;
                                }
                                if (pos.top < 75) {
                                    if (Math.abs(pos.top - this.oldPos.top) > 35) {
                                        $('#totden1').offset({ top: totDen1[0] + 75, left: y });
                                        return;
                                    }
                                    else {
                                        $('#totden1').offset({ top: x, left: y });
                                        return;
                                    }
                                }
                                else {
                                    let X = 0, Y = 0;
                                    if (Math.abs(this.oldPos.top - pos.top) > 30) {
                                        Y = this.oldPos.left;
                                    }
                                    else {
                                        if (Math.abs(pos.left - this.oldPos.left) > 30) {
                                            Y = pos.left > this.oldPos.left ? Math.ceil(this.oldPos.left / 73) * 73 + 73 : Math.ceil(this.oldPos.left / 73) * 73 - 73;
                                        }
                                        else {
                                            Y = this.oldPos.left;
                                        }
                                    }
                                    if (Math.abs(this.oldPos.left - pos.left) > 35) {
                                        X = Math.ceil(this.oldPos.top / 75) * 75;
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) % 75 > 30) {
                                            X = pos.top > this.oldPos.top ? Math.ceil(this.oldPos.top / 75) * 75 + 75 : Math.ceil(this.oldPos.top / 75) * 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75;
                                        }
                                    }

                                    $('#totden1').offset({ top: X + totDen1[0], left: Y + totDen1[1] });
                                    return;
                                }
                            }
                            break;
                        }
                        case 'totden2': {
                            if (pos.left < -160 || pos.left > 440 || pos.top < -10 || pos.top > 460) {
                                $('#totden2').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                if (this.oldPos.top > pos.top || Math.abs(this.oldPos.top - pos.top) > 80 || Math.abs(this.oldPos.left - pos.left) > 80) {
                                    $('#totden2').offset({ top: x, left: y });
                                    return;
                                }
                                if (pos.top < 75) {
                                    if (Math.abs(pos.top - this.oldPos.top) > 35) {
                                        $('#totden2').offset({ top: totDen2[0] + 75, left: y });
                                        return;
                                    }
                                    else {
                                        $('#totden2').offset({ top: x, left: y });
                                        return;
                                    }
                                }
                                else {
                                    let X = 0, Y = 0;
                                    if (Math.abs(this.oldPos.top - pos.top) > 30) {
                                        Y = this.oldPos.left;
                                    }
                                    else {
                                        if (Math.abs(pos.left - this.oldPos.left) > 30) {
                                            Y = pos.left > this.oldPos.left ? Math.ceil(this.oldPos.left / 73) * 73 + 73 : Math.ceil(this.oldPos.left / 73) * 73 - 73;
                                        }
                                        else {
                                            Y = this.oldPos.left;
                                        }
                                    }
                                    if (Math.abs(this.oldPos.left - pos.left) > 35) {
                                        X = Math.ceil(this.oldPos.top / 75) * 75;
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) % 75 > 30) {
                                            X = pos.top > this.oldPos.top ? Math.ceil(this.oldPos.top / 75) * 75 + 75 : Math.ceil(this.oldPos.top / 75) * 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75;
                                        }
                                    }

                                    $('#totden2').offset({ top: X + totDen2[0], left: Y + totDen2[1] });
                                    return;
                                }
                            }
                            break;
                        }
                        case 'totden3': {
                            if (pos.left < -300 || pos.left > 300 || pos.top < -10 || pos.top > 460) {
                                $('#totden3').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                if (this.oldPos.top > pos.top || Math.abs(this.oldPos.top - pos.top) > 80 || Math.abs(this.oldPos.left - pos.left) > 80) {
                                    $('#totden3').offset({ top: x, left: y });
                                    return;
                                }
                                if (pos.top < 75) {
                                    if (Math.abs(pos.top - this.oldPos.top) > 35) {
                                        $('#totden3').offset({ top: totDen3[0] + 75, left: y });
                                        return;
                                    }
                                    else {
                                        $('#totden3').offset({ top: x, left: y });
                                        return;
                                    }
                                }
                                else {
                                    let X = 0, Y = 0;
                                    if (Math.abs(this.oldPos.top - pos.top) > 30) {
                                        Y = this.oldPos.left;
                                    }
                                    else {
                                        if (Math.abs(pos.left - this.oldPos.left) > 30) {
                                            Y = pos.left > this.oldPos.left ? Math.ceil(this.oldPos.left / 73) * 73 + 73 : Math.ceil(this.oldPos.left / 73) * 73 - 73;
                                        }
                                        else {
                                            Y = this.oldPos.left;
                                        }
                                    }
                                    if (Math.abs(this.oldPos.left - pos.left) > 35) {
                                        X = Math.ceil(this.oldPos.top / 75) * 75;
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) % 75 > 30) {
                                            X = pos.top > this.oldPos.top ? Math.ceil(this.oldPos.top / 75) * 75 + 75 : Math.ceil(this.oldPos.top / 75) * 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75;
                                        }
                                    }

                                    $('#totden3').offset({ top: X + totDen3[0], left: Y + totDen3[1] });
                                    return;
                                }
                            }
                            break;
                        }
                        case 'totden4': {
                            if (pos.left < -450 || pos.left > 150 || pos.top < -10 || pos.top > 460) {
                                $('#totden4').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                if (this.oldPos.top > pos.top || Math.abs(this.oldPos.top - pos.top) > 80 || Math.abs(this.oldPos.left - pos.left) > 80) {
                                    $('#totden4').offset({ top: x, left: y });
                                    return;
                                }
                                if (pos.top < 75) {
                                    if (Math.abs(pos.top - this.oldPos.top) > 35) {
                                        $('#totden4').offset({ top: totDen4[0] + 75, left: y });
                                        return;
                                    }
                                    else {
                                        $('#totden4').offset({ top: x, left: y });
                                        return;
                                    }
                                }
                                else {
                                    let X = 0, Y = 0;
                                    if (Math.abs(this.oldPos.top - pos.top) > 30) {
                                        Y = this.oldPos.left;
                                    }
                                    else {
                                        if (Math.abs(pos.left - this.oldPos.left) > 30) {
                                            Y = pos.left > this.oldPos.left ? Math.ceil(this.oldPos.left / 73) * 73 + 73 : Math.ceil(this.oldPos.left / 73) * 73 - 73;
                                        }
                                        else {
                                            Y = this.oldPos.left;
                                        }
                                    }
                                    if (Math.abs(this.oldPos.left - pos.left) > 35) {
                                        X = Math.ceil(this.oldPos.top / 75) * 75;
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) % 75 > 30) {
                                            X = pos.top > this.oldPos.top ? Math.ceil(this.oldPos.top / 75) * 75 + 75 : Math.ceil(this.oldPos.top / 75) * 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75;
                                        }
                                    }

                                    $('#totden4').offset({ top: X + totDen4[0], left: Y + totDen4[1] });
                                    return;
                                }
                            }
                            break;
                        }
                        case 'totden5': {
                            if (pos.left < -590 || pos.left > 10 || pos.top < -10 || pos.top > 460) {
                                $('#totden5').offset({ top: x, left: y });
                                return;
                            }
                            else {
                                if (this.oldPos.top > pos.top || Math.abs(this.oldPos.top - pos.top) > 80 || Math.abs(this.oldPos.left - pos.left) > 80) {
                                    $('#totden5').offset({ top: x, left: y });
                                    return;
                                }
                                if (pos.top < 75) {
                                    if (Math.abs(pos.top - this.oldPos.top) > 35) {
                                        $('#totden5').offset({ top: totDen5[0] + 75, left: y });
                                        return;
                                    }
                                    else {
                                        $('#totden5').offset({ top: x, left: y });
                                        return;
                                    }
                                }
                                else {
                                    let X = 0, Y = 0;
                                    if (Math.abs(this.oldPos.top - pos.top) > 30) {
                                        Y = this.oldPos.left;
                                    }
                                    else {
                                        if (Math.abs(pos.left - this.oldPos.left) > 30) {
                                            Y = pos.left > this.oldPos.left ? Math.ceil(this.oldPos.left / 73) * 73 + 73 : Math.ceil(this.oldPos.left / 73) * 73 - 73;
                                        }
                                        else {
                                            Y = this.oldPos.left;
                                        }
                                    }
                                    if (Math.abs(this.oldPos.left - pos.left) > 35) {
                                        X = Math.ceil(this.oldPos.top / 75) * 75;
                                    }
                                    else {
                                        if (Math.abs(pos.top - this.oldPos.top) % 75 > 30) {
                                            X = pos.top > this.oldPos.top ? Math.ceil(this.oldPos.top / 75) * 75 + 75 : Math.ceil(this.oldPos.top / 75) * 75;
                                        }
                                        else {
                                            X = Math.ceil(this.oldPos.top / 75) * 75;
                                        }
                                    }

                                    $('#totden5').offset({ top: X + totDen5[0], left: Y + totDen5[1] });
                                    return;
                                }
                            }
                            break;
                        }
                    }

                    var movelist = [{ id: this.id, top: ui.position.top, left: ui.position.left, visible: true }];

                    var res = axios.post('/api/chess/movenode', movelist).then(response => {
                        this.chessRoom = response.data.data;
                        //alert(response);
                    })
                        .catch(error => {
                            console.log(error)
                        })
                        .finally();

                },
            });
        },
        mounted: function () {
            var chat = $.connection.requestlog;
            $.connection.hub.start().done(function () {

            });
            chat.client.postToClient = function (data) {
                $('#discussion').append('Message' + data + '<br />');

                var result = [];
                result = JSON.parse(data);
                for (var i = 0; i < result.length; i++) {
                    var node = $("#" + result[i].id);
                    node.css({ 'top': result[i].top + 'px' });
                    node.css({ 'left': result[i].left + 'px' });
                    node.css({ 'display': result[i].visible });
                    node.css({ 'top': result[i].top + 'px, left: ' + result[i].left + 'px, display:' + result[i].visible });
                    break;
                }
            };
            this.getchessNode();
        }
    })
</script>
